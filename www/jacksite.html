<!doctype html>
<html>
<head>
    <title>This is the title of the webpage!</title>
</head>
<body style="background-color: forestgreen">
<p>This is an example paragraph. Anything in the <strong>body</strong> tag will appear on the page, just like this <strong>p</strong> tag and its contents.</p>
<button id="pippo">giggio
</button>
<label for="jackhadettodaiunid">cippa</label><input id="jackhadettodaiunid"/>
<div style="display: flex;justify-content: center;justify-items: center; align-items: center; width: 100vw;">

    <button id="pippa" >upload
    </button>
    <label for="jackhadettodaiunaltroid">upload file</label><input type="file" id="jackhadettodaiunaltroid"/>
</div>
<!--<label for="id">cippa</label><input id="id"/>-->
<div style="display: flex;justify-content: center;justify-items: center; align-items: center; width: 100vw;">

    <button id="pippi?" >upload
    </button>
    <label for="unaltroid">upload file chunked request</label><input type="file" id="unaltroid"/>
</div>
<div class="container">
    <h1>Multipart File Upload</h1>
    <form id="form" enctype="multipart/form-data">
        <div class="input-group">
            <label for="files">Select files</label><input id="files" type="file" multiple />
        </div>
        <button class="submit-btn" type="submit">Upload</button>
    </form>
</div>
<script src="index.js"></script>
</body>
<script>
    document.getElementById("pippo").addEventListener("click", function(){
        fetch("http://127.1.0.1:8090/", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                "name": document.getElementById("jackhadettodaiunid").value
            })
        }).then(response => response.json())
            .then(data => console.log(data));
    });
</script>
<script>

    //  document.getElementById("form")("click", function(){
    //      var inputFile = document.getElementById("file")[0];
    //      var formData = new FormData();
    //      for (const file of inputFile.files) {
    //          formData.append("files", file);
    //      }
    //     fetch("http://localhost:8090", {
    //         method: "post",
    //         headers: {
    //             // "Content-Type": file.type,
    //             "Filename": inputFile.name
    //         },
    //         body: formData,
    //     })
    // });
    const form = document.getElementById("form");
    const inputFile = document.getElementById("files")[0];
    const formData = new FormData();

    const handleSubmit = (event) => {
        event.preventDefault();
        formData.append("files", inputFile);


        fetch("http://localhost:8090", {
            method: "post",
            body: formData,
        }).catch((error) => ("Something went wrong!", error));
    };

    form.addEventListener("submit", handleSubmit);
</script>
<script>
    document.getElementById("pippi?").addEventListener("click", function(){
        var file = document.getElementById("unaltroid").files[0];
        var formdata = new FormData();
        formdata.append("file", file);
                fetch("http://127.1.0.1:8090/", {
                    method: "POST",
                    headers: {
                        // "Content-Type": file.type,
                        "Filename": file.name
                    },
                    body: formdata
                })
        });
</script>
</html>